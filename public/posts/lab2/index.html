<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="light">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Master 2 - Human Computer Interaction: Lab Homework 2 – Mobile Controls &amp; Deployment for ML-Agents Project | Gustavo Scheidt</title>
<meta name="keywords" content="Unity, Mobile Development, ML-Agents, Reinforcement Learning, HCI, Deployment">
<meta name="description" content="Adapting the TrackBot reinforcement learning environment to mobile using on-screen buttons and deploying the Unity build to Android.">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/posts/lab2/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.cf367d7275bbac0cf2600a8cfa5300d17223b755c0fc0749190bde72230c0db7.css" integrity="sha256-zzZ9cnW7rAzyYAqM&#43;lMA0XIjt1XA/AdJGQveciMMDbc=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/assets/icone_site.png">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/assets/icone_site.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/assets/icone_site.png">
<link rel="apple-touch-icon" href="http://localhost:1313/assets/icone_site.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/lab2/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    }

</script>
</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Gustavo Scheidt (Alt + H)">Gustavo Scheidt</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/posts/" title="Blog">
                    <span>Blog</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Master 2 - Human Computer Interaction: Lab Homework 2 – Mobile Controls &amp; Deployment for ML-Agents Project
    </h1>
    <div class="post-description">
      Adapting the TrackBot reinforcement learning environment to mobile using on-screen buttons and deploying the Unity build to Android.
    </div>
    <div class="post-meta"><span title='2025-10-25 00:00:00 +0000 UTC'>October 25, 2025</span>

</div>
  </header> 
  <div class="post-content"><h1 id="lab-homework-2">Lab Homework 2<a hidden class="anchor" aria-hidden="true" href="#lab-homework-2">#</a></h1>
<p><em>Adapting the ML-Agents TrackBot Project to Mobile</em><br>
<em>Master’s in Computer Vision &amp; AI — Gustavo</em></p>
<p>This lab extends the reinforcement-learning final project of this class: an RL agent (<em>TrackBot</em>) trained using Unity ML-Agents to reach a randomly placed “Goal.”</p>
<hr>
<h1 id="1-the-agent-has-three-discrete-actions">1) The agent has <strong>three discrete actions</strong>:<a hidden class="anchor" aria-hidden="true" href="#1-the-agent-has-three-discrete-actions">#</a></h1>
<ol>
<li>Move forward</li>
<li>Rotate left</li>
<li>Rotate right</li>
</ol>
<p>These actions were originally controlled on desktop by <strong>arrow keys</strong> (via <code>Heuristic()</code>), but this lab required adapting the interaction model to <strong>mobile input</strong>, where keyboard keys do not exist.</p>
<p>I chose moving with <em>three on-screen buttons</em> as the most appropriate mapping.<br>
It reflects the discrete nature of the agent and matches the logic used in the RL training.</p>
<h1 id="2-designing-mobile-interaction-10-points">2) Designing Mobile Interaction (10 Points)<a hidden class="anchor" aria-hidden="true" href="#2-designing-mobile-interaction-10-points">#</a></h1>
<h2 id="you-may-be-asking-youself-why-on-screen-buttons">You may be asking youself: Why On-Screen Buttons?<a hidden class="anchor" aria-hidden="true" href="#you-may-be-asking-youself-why-on-screen-buttons">#</a></h2>
<p>The TrackBot only accepts <em>discrete</em> actions.<br>
Mobile joysticks produce continuous input, while gyroscope introduces unnecessary noise and instability.</p>
<p>On-screen buttons provide:</p>
<ul>
<li>clear affordance</li>
<li>ease of learning</li>
<li>perfect mapping to discrete actions</li>
<li>low ambiguity (important for debugging)</li>
<li>reproducibility across devices</li>
</ul>
<p>This matches good HCI principles: <strong>consistency</strong>, <strong>match between system and real-world expectations</strong>, and <strong>low cognitive overhead</strong>.</p>
<h1 id="21-creating-the-mobile-ui">2.1 Creating the Mobile UI<a hidden class="anchor" aria-hidden="true" href="#21-creating-the-mobile-ui">#</a></h1>
<p>Using Unity’s UI Toolkit (or Canvas + Buttons), I created three buttons:</p>
<ul>
<li><strong>Forward</strong></li>
<li><strong>Turn Left</strong></li>
<li><strong>Turn Right</strong></li>
</ul>
<p>Each button triggers a corresponding value stored in a <code>mobileAction</code> variable.<br>
This action is then used inside the <code>Heuristic()</code> function of the agent.</p>
<p>The layout is simple:</p>
<pre tabindex="0"><code>
[   Turn Left   ]   [ Forward ]   [   Turn Right   ]
</code></pre><p>Placed at the bottom of the screen, centered horizontally.</p>
<h1 id="22-implementing-mobile-input">2.2 Implementing Mobile Input<a hidden class="anchor" aria-hidden="true" href="#22-implementing-mobile-input">#</a></h1>
<h2 id="mobileinputcontrollercs">MobileInputController.cs<a hidden class="anchor" aria-hidden="true" href="#mobileinputcontrollercs">#</a></h2>
<p>I created a small script that stores which button is currently being pressed.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">using</span> UnityEngine;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MobileInputController</span> : MonoBehaviour
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> CurrentAction = <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> OnForwardPressed()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        CurrentAction = <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> OnLeftPressed()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        CurrentAction = <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> OnRightPressed()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        CurrentAction = <span style="color:#ae81ff">3</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> OnButtonReleased()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        CurrentAction = <span style="color:#ae81ff">0</span>; <span style="color:#75715e">// no action</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Each UI button calls these methods through Unity’s <strong>OnClick()</strong> and <strong>OnPointerDown/Up</strong> events.</p>
<h1 id="23-connecting-the-input-to-trackbot">2.3 Connecting the Input to TrackBot<a hidden class="anchor" aria-hidden="true" href="#23-connecting-the-input-to-trackbot">#</a></h1>
<p>Inside <strong><code>TrackBot.cs</code></strong> (your real file ), in the <code>Heuristic()</code> method, I replaced the keyboard logic with mobile logic:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> MobileInputController mobileInput;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">void</span> Heuristic(<span style="color:#66d9ef">in</span> ActionBuffers actionsOut)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> discreteActionsOut = actionsOut.DiscreteActions;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Default: do nothing</span>
</span></span><span style="display:flex;"><span>    discreteActionsOut[<span style="color:#ae81ff">0</span>] = <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Mobile action (from UI buttons)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (mobileInput != <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        discreteActionsOut[<span style="color:#ae81ff">0</span>] = mobileInput.CurrentAction;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This ensures:</p>
<ul>
<li>desktop training still works</li>
<li>mobile now controls the agent</li>
<li>RL logic is unchanged</li>
</ul>
<p>This approach abstracts the input cleanly and matches the architecture expected in ML-Agents.</p>
<h1 id="3-deploying-the-application-5-points">3) Deploying the Application (5 Points)<a hidden class="anchor" aria-hidden="true" href="#3-deploying-the-application-5-points">#</a></h1>
<p>The second part of the lab was to <strong>deploy the adapted application to a mobile device</strong>.</p>
<p>I followed the official Unity documentation for Android deployment:</p>
<p><a href="https://docs.unity3d.com/Manual/android-BuildProcess.html">https://docs.unity3d.com/Manual/android-BuildProcess.html</a></p>
<h1 id="31-environment-setup">3.1 Environment Setup<a hidden class="anchor" aria-hidden="true" href="#31-environment-setup">#</a></h1>
<p>In Unity Hub, I installed:</p>
<ul>
<li>Android Build Support</li>
<li>Android SDK</li>
<li>Android NDK</li>
<li>OpenJDK</li>
</ul>
<p>This step is essential, without it Unity cannot export APKs.</p>
<h1 id="32-configuring-the-build-settings">3.2 Configuring the Build Settings<a hidden class="anchor" aria-hidden="true" href="#32-configuring-the-build-settings">#</a></h1>
<p>In <em>File → Build Settings → Android</em>:</p>
<ul>
<li>Switched platform to Android</li>
<li>Set resolution &amp; presentation to portrait</li>
<li>Disabled unused features for performance</li>
<li>Ensured minimum API level ≥ Android 8.0</li>
</ul>
<h1 id="33-deploying-to-device">3.3 Deploying to Device<a hidden class="anchor" aria-hidden="true" href="#33-deploying-to-device">#</a></h1>
<p>Steps:</p>
<ol>
<li>Enabled developer mode on the phone</li>
<li>Enabled USB debugging</li>
<li>Connected phone via ADB</li>
<li>Clicked <strong>Build &amp; Run</strong></li>
</ol>
<p>Unity compiled the APK and installed it directly on the device.</p>
<h1 id="4-testing-the-mobile-application">4) Testing the Mobile Application<a hidden class="anchor" aria-hidden="true" href="#4-testing-the-mobile-application">#</a></h1>
<p>After deployment, the TrackBot environment worked as expected:</p>
<ul>
<li>Touch buttons correctly triggered actions</li>
<li>The TrackBot rotated and moved exactly like on desktop</li>
<li>Rewards, collisions, and episode resets remained unchanged</li>
</ul>
<p>The GUI debugging script (<code>GUI_TrackBot.cs</code> ) worked perfectly on mobile and was very helpful for observing:</p>
<ul>
<li>episode number</li>
<li>step count</li>
<li>cumulative reward</li>
</ul>
<p>This helped confirm that the RL logic stayed intact.</p>
<h1 id="5-problems-encountered--how-i-solved-them">5) Problems Encountered &amp; How I Solved Them<a hidden class="anchor" aria-hidden="true" href="#5-problems-encountered--how-i-solved-them">#</a></h1>
<h3 id="problem-1--button-presses-felt"><em>Problem 1 — Button presses felt &ldquo;off&rdquo; (agent kept moving after releasing).</em><a hidden class="anchor" aria-hidden="true" href="#problem-1--button-presses-felt">#</a></h3>
<p><strong>Cause:</strong>
Using only <code>OnClick()</code> does not detect release.</p>
<p><strong>Fix:</strong>
Use <strong>OnPointerDown</strong> and <strong>OnPointerUp</strong> events:</p>
<ul>
<li>Down → set action</li>
<li>Up → return to action 0</li>
</ul>
<h3 id="problem-2--touch-inputs-not-detected-in-build"><em>Problem 2 — Touch inputs not detected in build.</em><a hidden class="anchor" aria-hidden="true" href="#problem-2--touch-inputs-not-detected-in-build">#</a></h3>
<p><strong>Cause:</strong> EventSystem missing in scene.</p>
<p><strong>Fix:</strong>
Added:</p>
<pre tabindex="0"><code>GameObject → UI → EventSystem
</code></pre><h3 id="problem-3--the-trackbot-rotated-too-fast-on-mobile"><em>Problem 3 — The TrackBot rotated too fast on mobile.</em><a hidden class="anchor" aria-hidden="true" href="#problem-3--the-trackbot-rotated-too-fast-on-mobile">#</a></h3>
<p><strong>Cause:</strong> User presses faster than keyboard repeat rate.</p>
<p><strong>Fix:</strong>
Reduced rotation speed on mobile builds using:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">#if</span> UNITY_ANDROID
</span></span><span style="display:flex;"><span>_rotationSpeed = <span style="color:#ae81ff">120f</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e">#endif</span>
</span></span></code></pre></div><h1 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h1>
<p>In summary: this lab was to show the transformation of the TrackBot RL experiment into a functional mobile application.</p>
<p>I learned:</p>
<ul>
<li>how to create mobile-friendly UI</li>
<li>how to deploy Unity applications to Android</li>
<li>how to debug mobile behavior</li>
</ul>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/unity/">Unity</a></li>
      <li><a href="http://localhost:1313/tags/mobile-development/">Mobile Development</a></li>
      <li><a href="http://localhost:1313/tags/ml-agents/">ML-Agents</a></li>
      <li><a href="http://localhost:1313/tags/reinforcement-learning/">Reinforcement Learning</a></li>
      <li><a href="http://localhost:1313/tags/hci/">HCI</a></li>
      <li><a href="http://localhost:1313/tags/deployment/">Deployment</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2025 <a href="http://localhost:1313/">Gustavo Scheidt</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer></body>

</html>
